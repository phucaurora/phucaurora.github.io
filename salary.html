<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>B·∫£ng t√≠nh l∆∞∆°ng c√° nh√¢n</title>
<style>
body {
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(180deg, #ffffff, #e3f2fd);
  color: #000;
  text-align: center;
  margin: 0;
  padding: 20px;
}
h1 { color: #1a237e; }
table {
  width: 90%;
  margin: 0 auto;
  border-collapse: collapse;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 5px 20px rgba(0,0,0,0.1);
  background: #fff;
}
th {
  background: #42a5f5;
  color: white;
  padding: 10px;
  font-size: 16px;
}
td {
  border: 1px solid #ddd;
  padding: 8px;
}
input[type="text"] {
  width: 110px;
  padding: 5px;
  border-radius: 6px;
  border: 1px solid #bbb;
  text-align: right;
}
button.edit {
  background: #ffb74d;
  border: none;
  padding: 3px 8px;
  border-radius: 6px;
  cursor: pointer;
}
tfoot {
  background: #e3f2fd;
  font-weight: bold;
}
a {
  color: #0288d1;
  text-decoration: none;
}
a:hover { text-decoration: underline; }
</style>
</head>
<body>
  <h1>üìä B·∫£ng t√≠nh l∆∞∆°ng c√° nh√¢n</h1>
  <p>Nh·∫≠p l∆∞∆°ng h√†ng th√°ng v√† h·ªá th·ªëng s·∫Ω t·ª± chia theo t·ª∑ l·ªá 60% - 10% - 10% - 20%</p>

  <table id="salaryTable">
    <thead>
      <tr>
        <th>Th√°ng</th>
        <th>L∆∞∆°ng (VND)</th>
        <th>Chi ti√™u c·ªë ƒë·ªãnh (60%)</th>
        <th>Qu·ªπ d·ª± ph√≤ng (10%)</th>
        <th>Ti·∫øt ki·ªám du l·ªãch (10%)</th>
        <th>ƒê·∫ßu t∆∞ (20%)</th>
        <th>S·ª≠a</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
    <tfoot>
      <tr>
        <td>T·ªïng c·ªông</td>
        <td id="totalSalary">0</td>
        <td id="totalFixed">0</td>
        <td id="totalReserve">0</td>
        <td id="totalTravel">0</td>
        <td id="totalInvest">0</td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <p><a href="index.html">‚Üê Quay l·∫°i trang ch√≠nh</a></p>

<script>
const months = [
  '10/2025','11/2025','12/2025','01/2026','02/2026','03/2026',
  '04/2026','05/2026','06/2026','07/2026','08/2026','09/2026',
  '10/2026','11/2026','12/2026'
];

function formatNumber(num) {
  return num.toLocaleString('vi-VN');
}

function parseNumber(str) {
  return parseFloat(str.replace(/\./g, '').replace(/,/g, '')) || 0;
}

const tbody = document.getElementById('tableBody');

// t·∫°o d√≤ng
months.forEach(m => {
  const saved = localStorage.getItem(m) || 0;
  const row = document.createElement('tr');
  row.innerHTML = `
    <td>${m}</td>
    <td><input type="text" value="${formatNumber(saved)}" oninput="updateRow(this)"></td>
    <td class="fixed">0</td>
    <td class="reserve">0</td>
    <td class="travel">0</td>
    <td class="invest">0</td>
    <td><button class="edit" onclick="editRow(this)">‚úèÔ∏è</button></td>
  `;
  tbody.appendChild(row);
});

function updateRow(input) {
  let raw = input.value.replace(/[^\d]/g, '');
  if (raw) input.value = formatNumber(parseFloat(raw));
  const row = input.closest('tr');
  const salary = parseNumber(input.value);
  row.querySelector('.fixed').textContent = formatNumber(salary * 0.6);
  row.querySelector('.reserve').textContent = formatNumber(salary * 0.1);
  row.querySelector('.travel').textContent = formatNumber(salary * 0.1);
  row.querySelector('.invest').textContent = formatNumber(salary * 0.2);
  localStorage.setItem(row.cells[0].textContent, salary);
  updateTotals();
}

function editRow(btn) {
  const input = btn.closest('tr').querySelector('input');
  input.focus();
  input.select();
}

function updateTotals() {
  let totalSalary=0, totalFixed=0, totalReserve=0, totalTravel=0, totalInvest=0;
  document.querySelectorAll('#salaryTable tbody tr').forEach(r=>{
    const s = parseNumber(r.querySelector('input').value);
    totalSalary += s;
    totalFixed += parseNumber(r.querySelector('.fixed').textContent);
    totalReserve += parseNumber(r.querySelector('.reserve').textContent);
    totalTravel += parseNumber(r.querySelector('.travel').textContent);
    totalInvest += parseNumber(r.querySelector('.invest').textContent);
  });
  document.getElementById('totalSalary').textContent = formatNumber(totalSalary);
  document.getElementById('totalFixed').textContent = formatNumber(totalFixed);
  document.getElementById('totalReserve').textContent = formatNumber(totalReserve);
  document.getElementById('totalTravel').textContent = formatNumber(totalTravel);
  document.getElementById('totalInvest').textContent = formatNumber(totalInvest);
}

// kh√¥i ph·ª•c d·ªØ li·ªáu
window.onload = () => {
  document.querySelectorAll('#salaryTable tbody tr input').forEach(i => updateRow(i));
};
</script>
</body>
</html>
